#!/usr/bin/env node

var program = require('commander')
  , fs = require('fs');

program
  .version('0.0.1')
  .usage('zf2 [command] [options]')
  .option('init', 'Initialize a skeleton zend framework 2 application in the specified dir')
  .option('create-module', 'Creates skeleton module under modules of current dir')
  .parse(process.argv);


if(program.createModule){
  require('../commands/create-module')(program.args, process.cwd(), function(err, name){
    console.log('[zf2] module ' + name + ' created. Be sure to add it to config/application.config.php!');
  });
}

if(program.init){
  var originalDir = process.cwd()
    , dir = originalDir;
  if(program.args.length > 0){
    dir = originalDir+'/'+program.args.shift();
    fs.mkdirSync(dir);
    process.chdir(dir);
  }
  
  require('../commands/init')(program, dir, function(){
    process.chdir(originalDir);
  });
}
